<!DOCTYPE html>

<!-- import bootstrap -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css"
    integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

<div id="app">
    <div class="container">
        <div class="card mt-5">
            <h2 class="card-header">Laser Cutter Queue</h2>
            <!-- This displays the current queue count -->
            <div class="m-3" v-cloak v-if="numPeople > 0">
                <p>There are {{numPeople}} in the queue</p>
            </div>
            <form class="m-5">
                <div class="form-row">
                    <div class="col">
                        <input type="text" name="" class="form-control" id="first" placeholder="First name">
                    </div>
                    <div class="col">
                        <input type="text" class="form-control" name="lastName" id="last" placeholder="Last name">
                    </div>
                    <button @click="add()" class="btn">Add</button>
                </div>
            </form>
            <table class="table">
                <thead class="thead-light">
                    <th>#</th>
                    <th>Name</th>
                    <th>Time-In</th>
                    <th>Remove</th>
                </thead>
                <tbody v-cloak>
                    <tr v-for="(p, index) in people" :key="index">
                        <td>{{index + 1}}</td>
                        <td>{{p.name}}</td>
                        <td>{{p.timeIn}}</td>
                        <td>
                            <button @click="remove(p.index)" class="btn btn-warning">remove</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- import scripts -->
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>

<script>
    var vm = new Vue({
        el: "#app",
        data: {
            people: []
        },
        computed: {
            numPeople: function () {
                return this.people.length;
            }
        },
        created: function () {
            this.add();
        },
        methods: {
            remove: function (index) {
                this.people.splice(index, 1)
            },
            add: function () {
                var first = document.getElementById("first")
                var last = document.getElementById("last")
                var name = first + " " + last;
                var today = new Date();
                var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
                this.people[this.people.length] = new Person(name, time);
                created();
            },
            getName: function (p) {
                if (p.name.length > 0) {
                    return p.name;
                }
                return 'N/A';
            },
            getTime: function (p) {
                if (p.time.length > 0) {
                    return p.time;
                }
                return 'N/A';
            }
        }
    })
    class Person {
        name
        time
        constructor(name, time) {
            this.name = name
            this.timeIn = time
        }
        getName() {
            return this.name
        }
        getTimeIn() {
            return this.timeIn
        }
    }
</script>